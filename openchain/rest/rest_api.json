{
    "swagger": "2.0",
    "info": {
        "title": "Openchain API",
        "description": "Interact with the enterprise Blockchain through Openchain API",
        "version": "1.0.0"
    },
    "host": "127.0.0.1:3000",
    "schemes": [
        "http"
    ],
    "produces": [
        "application/json"
    ],
    "paths": {
        "/chain": {
            "get": {
                "summary": "Blockchain Information",
                "description": "The Chain endpoint returns information about the current state of the blockchain such as the height, the current block hash, and the previous block hash.",
                "tags": [
                    "Blockchain"
                ],
                "responses": {
                    "200": {
                        "description": "Blockchain information",
                        "schema": {
                           "$ref": "#/definitions/BlockchainInfo"
                        }
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/Error"
                        }
                    }
                }
            }
        },
        "/chain/blocks/{Block}": {
            "get": {
                "summary": "Individual Block Information",
                "description": "The {Block} endpoint returns information about a specific block within the Blockchain. Note that the genesis block is block zero.",
                "tags": [
                    "Block"
                ],
                "parameters": [{
                    "name": "Block",
                    "in": "path",
                    "description": "Block number to retrieve",
                    "type": "integer",
                    "format": "uint64",
                    "required": true
                }],
                "responses": {
                    "200": {
                        "description": "Individual Block contents",
                        "schema": {
                           "$ref": "#/definitions/Block"
                        }
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/Error"
                        }
                    }
                }
            }
        },
        "/state/{chaincodeID}/{key}": {
            "get": {
                "summary": "State information for unique chaincodeID and key",
                "description": "The {chaincodeID}/{key} endpoint returns state information matching a specific chaincodeID and key. If there is no match on either the chaincodeID or the key, a \"null\" value is returned for the state.",
                "tags": [
                    "State"
                ],
                "parameters": [{
                    "name": "chaincodeID",
                    "in": "path",
                    "description": "Unique Chaincode identifier",
                    "type": "string",
                    "required": true
                }, {
                    "name": "key",
                    "in": "path",
                    "description": "Key to match within the Chaincode",
                    "type": "string",
                    "required": true
                }],
                "responses": {
                    "200": {
                        "description": "Retrieved state value",
                        "schema": {
                           "$ref": "#/definitions/State"
                        }
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/Error"
                        }
                    }
                }
            }
        },
        "/devops/build": {
            "post": {
                "summary": "Service endpoint for building Chaincode",
                "description": "The /devops/build endpoint receives Chaincode build requests for existing Chaincodes. The Chaincode and the required entities are packaged into a container upon receipt of the request. If the build is successful, an encoded codePackage is returned. Otherwise, an error is displayed alongside with a reason for the failure.",
                "tags": [
                    "Devops"
                ],
                "parameters": [{
                    "name": "ChaincodeSpec",
                    "in": "body",
                    "description": "Chaincode specification message",
                    "required": true,
                    "schema": {
                       "$ref": "#/definitions/ChaincodeSpec"
                    }
                }],
                "responses": {
                    "200": {
                        "description": "Chaincode deployment specification message",
                        "schema": {
                           "$ref": "#/definitions/ChaincodeDeploymentSpec"
                        }
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/Error"
                        }
                    }
                }
            }
        },
        "/devops/deploy": {
           "post": {
              "summary": "Service endpoint for deploying Chaincode",
              "description": "The /devops/deploy endpoint receives Chaincode deployment requests for existing Chaincodes. The Chaincode and the required entities are first packaged into a container and subsequently deployed to the blockchain. If the Chaincode build and deployment are successful, an encoded codePackage is returned. Otherwise, an error is displayed alongside with a reason for the failure.",
              "tags": [
                  "Devops"
              ],
              "parameters": [{
                 "name": "ChaincodeSpec",
                 "in": "body",
                 "description": "Chaincode specification message",
                 "required": true,
                 "schema": {
                    "$ref": "#/definitions/ChaincodeSpec"
                 }
              }],
              "responses": {
                  "200": {
                      "description": "Chaincode deployment specification message",
                      "schema": {
                         "$ref": "#/definitions/ChaincodeDeploymentSpec"
                      }
                  },
                  "default": {
                      "description": "Unexpected error",
                      "schema": {
                          "$ref": "#/definitions/Error"
                      }
                  }
              }
           }
        }
    },
    "definitions": {
        "BlockchainInfo": {
            "type": "object",
            "properties": {
                "height": {
                    "type": "integer",
                    "format": "uint64",
                    "description": "Current height of the blockchain."
                },
                "currentBlockHash": {
                    "type": "string",
                    "format": "bytes",
                    "description": "Hash of the last block in the blockchain."
                },
                "previousBlockHash": {
                    "type": "string",
                    "format": "bytes",
                    "description": "Hash of the previous block in the blockchain."
                }
            }
        },
        "Block": {
            "type": "object",
            "properties": {
                "proposerID": {
                    "type": "string",
                    "description": "Creator/originator of the block."
                },
                "Timestamp": {
                    "type": "string",
                    "description": "Time of block creation."
                },
                "transactions": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Transaction"
                    }
                },
                "stateHash": {
                    "type": "string",
                    "format": "bytes",
                    "description": "Global state hash after executing all transactions in the block."
                },
                "previousBlockHash": {
                    "type": "string",
                    "format": "bytes",
                    "description": "Hash of the previous block in the blockchain."
                }
            }
        },
        "Transaction": {
            "type": "object",
            "properties": {
                "type": {
                    "type": "string",
                    "default": "UNDEFINED",
                    "enum":[
                        "UNDEFINED",
                        "CHAINLET_NEW",
                        "CHAINLET_UPDATE",
                        "CHAINLET_EXECUTE",
                        "CHAINLET_TERMINATE"
                    ],
                    "description": "Transaction type."
                },
                "chaincodeID": {
                    "$ref": "#/definitions/ChaincodeID",
                    "description": "Unique Chaincode identifier."
                },
                "function": {
                    "type": "string",
                    "description": "Function to execute within a Chaincode."
                },
                "args": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "description": "Arguments supplied to the Chaincode function."
                },
                "payload": {
                    "type": "string",
                    "format": "bytes",
                    "description": "Payload supplied for Chaincode function execution."
                },
                "uuid": {
                   "type": "string",
                   "description": "Unique transaction identifier."
                }
            }
        },
        "ChaincodeID": {
            "type": "object",
            "properties": {
                "Url": {
                    "type": "string",
                    "description": "URL for accessing the Chaincode."
                },
                "Version": {
                    "type": "string",
                    "description": "Current version of a Chaincode."
                }
            }
        },
        "State": {
            "type": "object",
            "properties": {
                "State": {
                    "type": "string",
                    "description": "State value matching the chaincodeId and key parameters."
                }
            }
        },
        "ChaincodeSpec": {
            "type": "object",
            "properties": {
                "type": {
                    "type": "string",
                    "default": "GOLANG",
                    "enum":[
                        "UNDEFINED",
                        "GOLANG",
                        "NODE"
                    ],
                    "description": "Chaincode specification language."
                },
                "chaincodeID": {
                    "$ref": "#/definitions/ChaincodeID",
                    "description": "Unique Chaincode identifier."
                },
                "ctorMsg": {
                    "$ref": "#/definitions/ChaincodeMessage",
                    "description": "Specific function to execute within the Chaincode."
                }
            }
        },
        "ChaincodeDeploymentSpec": {
            "type": "object",
            "properties": {
                "chaincodeSpec": {
                    "$ref": "#/definitions/ChaincodeSpec",
                    "description": "Chaincode specification message."
                },
                "effectiveDate": {
                    "type": "string",
                    "description": "Time of Chaincode creation/activation."
                },
                "codePackage": {
                    "type": "string",
                    "format": "bytes",
                    "description": "Compiled Chaincode package."
                }
            }
        },
        "ChaincodeMessage": {
            "type": "object",
            "properties": {
                "function": {
                    "type": "string",
                    "description": "Function to execute within a Chaincode."
                },
                "args": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "description": "Arguments supplied to the Chaincode function."
                }
            }
        },
        "Error": {
            "type": "object",
            "properties": {
                "Error": {
                    "type": "string",
                    "description": "A descriptive message explaining the cause of error."
                }
            }
        }
    }
}
